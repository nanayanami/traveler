<div class="chat-room-wrapper vh-100 d-flex flex-column">
  
  <div class="chat-header d-flex align-items-center py-3 px-4 ">
    <%= link_to root_path, class: "text-dark me-3" do %>
      <i class="fa-solid fa-arrow-left arrow-left"></i>
    <% end %>
    <h3 class="m-0 fs-5 fw-bold text-primary">
      <%= @another_entry.user.name %> さんとのトークルーム
    </h3>
  </div>

  <%# メッセージ表示エリア %>
  <div class="chat-body p-4 flex-grow-1 overflow-auto">
    <div class="chat-content-box shadow-sm p-4 mx-auto">   
      
      <% @messages.each do |m| %>
        <% if m.user_id == current_user.id %>
          <%# 自分の投稿 %>
          <div class="d-flex justify-content-end mb-4">
            <div class="my-message-box ">
              <%= m.message %>
            </div>
          </div>
        <% else %>
          <%# 相手の投稿（左側・白系） %>
          <div class="d-flex justify-content-start mb-4 align-items-start">
            <%= image_tag m.user.icon, class: "chat-avatar-img me-2" %>
            <div class="other-message-box">
              <%= m.message %>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>

  <%# 入力フォームエリア %>
  <div class="chat-form-box p-3 border-top bg-white">
    <%= form_with model: [@room, @message], local: true do |f| %>
      <%# gap-2 を追加して、入力欄とボタンの間に隙間を作ります %>
      <div class="chat-form-group d-flex gap-2">
        <%= f.text_field :message, class: "form-control border-0 bg-light rounded-pill px-4", placeholder: "メッセージを入力して下さい" %>
        <%= f.submit "送信する", class: "btn btn-primary rounded-pill px-4 shadow-sm" %>
      </div>
    <% end %>
  </div>
</div>